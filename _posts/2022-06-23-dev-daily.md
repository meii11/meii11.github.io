---
layout: post
title: 220623-å¼€å‘æ—¥è®°
categories: å¼€å‘æ—¥è®°
---
ä»Šå¤©å·¥ä½œä¸»è¦æ˜¯ä»£ç é™¤è™«ï¼š

## æ–‡æœ¬æ¢è¡Œé—®é¢˜

å‡ºç°äº†ç¬¬ä¸€è¡Œå°‘ä¸€ä¸ªå­—çš„é—®é¢˜ï¼ŒåŸå› æ˜¯ä»£ç ä¸­çš„ä¸€ä¸ªç®€å•é€»è¾‘æé”™äº†ğŸ˜·

```python
width, height = draw.textsize(char,self.font)
sum_width += width
if sum_width >self.width:  # è¶…è¿‡é¢„è®¾å®½åº¦å°±ä¿®æ”¹æ®µè½ ä»¥åŠå½“å‰è¡Œæ•°
    line_count += 1
    sum_width = 0
    paragraph += '\n'
paragraph += char
line_height = max(height, line_height)
```

åŸæ¥çš„ä»£ç é€»è¾‘å¦‚ä¸Šæ‰€ç¤ºï¼Œä¼šå…ˆæŠŠå½“å‰å­—ç¬¦çš„å®½åº¦åŠ åˆ° sum_width ä¸Šååˆ¤æ–­æ˜¯å¦è¶…è¿‡å½“å‰è¡Œå®½ï¼Œbugå°±æ˜¯å› ä¸ºå¦‚æœè¶…è¿‡äº†å°±ä¼šæŠŠè¿™ä¸ªå­—ç›´æ¥æ”¾åˆ°ä¸‹ä¸€è¡Œä¸­ï¼Œä½†ä¸æŠŠè¿™ä¸ªå­—å®½è®¡å…¥ä¸‹ä¸€è¡Œï¼Œå› æ­¤å¯¼è‡´ç¬¬ä¸€è¡Œå°‘å­—ï¼Œä¹‹åçš„è¡Œå¤šå­—ã€‚

ğŸ‘‡ä¿®æ”¹åä»£ç ä¸ºï¼š

```python
width, height = draw.textsize(char,self.font)
sum_width += width
paragraph += char
sum_char[char] = width
# sum_char += 1
line_height = max(height, line_height)
if sum_width+width > self.width:  # è¶…è¿‡é¢„è®¾å®½åº¦å°±ä¿®æ”¹æ®µè½ ä»¥åŠå½“å‰è¡Œæ•°
    line_count += 1
    sum_width = 0
    paragraph += '\n'
    sum_char = {}
```

## å›¾ç‰‡ä¸‹è½½é—®é¢˜

ffmpeg ç›´æ¥ä¸‹è½½urlä¼¼ä¹ä¸€è‡´ä¸ç¨³å®šï¼Œè¿™æ¬¡æ¢æˆ`request.get()`æ¥åšï¼š

```python
import requests
from PIL import Image

im = Image.open(requests.get(Image_url, stream=True).raw)
im.save("alpha_img.png")
```